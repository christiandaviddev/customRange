{"version":3,"sources":["webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/components/range/range.component.ts","webpack:///src/app/shared/components/range/range.component.html"],"names":["SharedModule","declarations","imports","exports","RangeComponent","min","max","type","rangeSubscriptions","filterValue","body","document","push","setRangePointByClick","forEach","s","unsubscribe","console","log","range","getElementById","firstRangePoint","lastRangePoint","firtsPointValue","lastPointValue","offsetWidth","pipe","event","valueX","pageX","subscribe","data","value","checkRangePoints","newPosition","firtsPosition","lastPosition","restValueLeft","restValueRight","evnt","id","isMouseDownEvent","position","style","left","replace","Number","v","String","selector","templateUrl","styleUrls"],"mappings":"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","file":"default~components-fixed-values-range-fixed-values-range-module~components-normal-range-normal-range-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RangeComponent } from './components/range/range.component';\n\n\n\n@NgModule({\n  declarations: [\n    RangeComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    RangeComponent\n  ],\n})\nexport class SharedModule { }\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, map, takeWhile, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngc-range',\n  templateUrl: './range.component.html',\n  styleUrls: ['./range.component.scss']\n})\nexport class RangeComponent implements OnInit, OnDestroy {\n\n\n\n  @Input() min = 0;\n  @Input() max = 0;\n  @Input() type = '';\n\n  rangeSubscriptions: Subscription[] = [];\n  clickRange$: any;\n\n  firstRangePoint: HTMLSpanElement;\n  lastRangePoint: HTMLSpanElement;\n\n  // firstRangeValue: number;\n  // lastRangeValue: number;\n\n  isMouseDownEvent: boolean;\n  filterValue:number = 0;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    const body = document.body as HTMLElement;\n    this.rangeSubscriptions.push(this.setRangePointByClick());\n    // this.setValueRangePoint(firtsRange, 0);\n    // this.setValueRangePoint(lastRange, range.offsetWidth);\n  }\n\n  ngOnDestroy(): void {\n   this.rangeSubscriptions.forEach((s: Subscription) => s.unsubscribe());\n  }\n\n  setRangePointByClick(): Subscription {\n    console.log('setRangePointByClick');\n    const range = document.getElementById('range') as HTMLDivElement;\n    this.firstRangePoint = document.getElementById('first-range-point') as HTMLDivElement;\n    this.lastRangePoint = document.getElementById('last-range-point') as HTMLDivElement;\n\n    this.firtsPointValue = 0;\n    this.lastPointValue = range.offsetWidth;\n    return fromEvent(range, 'mousedown')\n      .pipe(\n        debounceTime(180),\n        distinctUntilChanged(),\n        map((event: MouseEvent) => {\n          let valueX = event.pageX;\n          console.log('valueX a', event.pageX);\n          valueX = valueX >= range.offsetWidth ? range.offsetWidth : valueX;\n          valueX = valueX < 0 ? 0 : valueX;\n          console.log('valueX', valueX);\n          return valueX;\n        })\n      ).subscribe(data => {\n          console.log('data', data);\n          const value = this.max * ((data / 2) / 100);\n          this.filterValue = value >= this.max ? this.max : value;\n          // rangePoint.style.left = data - Number(rangePoint.offsetWidth) + 'px';\n\n          this.checkRangePoints(data, this.firtsPointValue, this.lastPointValue);\n    });\n  }\n\n  checkRangePoints(newPosition, firtsPosition, lastPosition) {\n    console.log('newPosition, firtsPosition, lastPosition', newPosition, firtsPosition, lastPosition)\n    let restValueLeft = newPosition - firtsPosition;\n    restValueLeft = restValueLeft < 0 ? restValueLeft * -1 : restValueLeft;\n\n    let restValueRight = newPosition - lastPosition;\n    restValueRight = restValueRight < 0 ? restValueRight * -1 : restValueRight;\n\n    console.log('restValueLeft > restValueRight', restValueLeft , restValueRight);\n    if (restValueLeft <= restValueRight) {\n      this.firtsPointValue = newPosition;\n    } else{\n      this.lastPointValue = newPosition;\n    }\n  }\n\n  // setValueRangePoint(rangePoint: HTMLDivElement, value: number) {\n  //   rangePoint.style.left = value - Number(rangePoint.offsetWidth) + 'px';\n  // }\n\n  mouseDownEvent(evnt: any, id: string) {\n    console.log('mouseDownEvent');\n    // this.isMouseDownEvent = true;\n    // const body = document.body as HTMLElement;\n    // const range = document.getElementById('range') as HTMLDivElement;\n    // const firtsRange = document.getElementById(id) as HTMLDivElement;\n    // this.firstRangeSubscription = fromEvent(body, 'mousemove').pipe(\n    //   map((event: MouseEvent) => event.pageX),\n    //   ).subscribe(data => {\n    //     console.log('evnt', evnt);\n    //     if ((this.max * (((data - (range.offsetWidth - (range.offsetWidth * 1))) / 2) / 100) <= this.max) &&\n    //     (this.max * (((data - (range.offsetWidth )) / 2) / 100) >= (this.min - (range.offsetWidth * 1))) && this.isMouseDownEvent) {\n    //       firtsRange.style.left = (data - Number(range.offsetWidth)) + 'px';\n    //       console.log('VALUE ', data, this.max * ((data / 2) / 100), range.offsetWidth, firtsRange.style.left );\n    //     }\n    // });\n  }\n\n  mouseUpEvent(evnt: any, id: string) {\n    console.log('fin');\n    this.isMouseDownEvent = false;\n    // this.firstRangeSubscription.unsubscribe();\n  }\n\n\n  public get firtsPointValue(): number {\n    const position = this.firstRangePoint.style.left.replace('px', '');\n    console.log('firstRangePoint', position);\n    return Number(position);\n  }\n\n  public set firtsPointValue(v: number) {\n    this.firstRangePoint.style.left = String(v) + 'px';\n  }\n\n  public get lastPointValue(): number {\n    const position = this.lastRangePoint.style.left.replace('px', '');\n    console.log('firstRangePoint', position);\n    return Number(position);\n  }\n\n  public set lastPointValue(v: number) {\n    this.lastRangePoint.style.left = String(v) + 'px';\n  }\n\n\n  // mouseDownEvent(evnt: any, id: string) {\n  //   const body = document.body as HTMLElement;\n  //   const range = document.getElementById(id) as HTMLDivElement;\n  //   const firtsRange = document.getElementById(id) as HTMLDivElement;\n  //   this.firstRangeSubscription = fromEvent(body, 'mousemove').pipe(\n  //     map((event: MouseEvent) => event.pageX),\n  //   ).subscribe(data => {\n  //     if ((this.max * (((data - (range.offsetWidth - (range.offsetWidth * 1))) / 2) / 100) <= this.max) &&\n  //     (this.max * (((data - (range.offsetWidth )) / 2) / 100) >= (this.min - (range.offsetWidth * 1)))) {\n\n  //       firtsRange.style.left = (data - Number(range.offsetWidth)) + 'px';\n  //       console.log('VALUE ', data, this.max * ((data / 2) / 100), range.offsetWidth, firtsRange.style.left );\n  //     }\n  //   });\n  // }\n\n  // mouseUpEvent(evnt: any, id: string) {\n  //   console.log('fin');\n\n  //   this.firstRangeSubscription.unsubscribe();\n  // }\n\n}\n","<ng-container *ngIf=\"!type\">\n  <p>{{min}}</p>\n</ng-container>\n<div id=\"container-range\">\n  <p id=\"range\">\n    <span id=\"first-range-point\" class=\"first-range\"></span>\n    <!-- <span id=\"first-range-title\" class=\"first-range range-point-title\">{{firtsPointValue}}</span> -->\n    <span id=\"last-range-point\" class=\"last-range\"></span>\n    <!-- <span id=\"last-range-title\" class=\"last-range range-point-title\">{{lastPointValue}}</span> -->\n  </p>\n</div>\n<ng-container *ngIf=\"!type\">\n  <p>{{max}}</p>\n</ng-container>\n\n<br>\n<p>{{filterValue | currency:'EUR'}}</p>\n\n<p>{{clickRange$ |async}}</p>\n<br>\n{{firtsPointValue}}\n<br>\n{{lastPointValue}}\n\n"]}