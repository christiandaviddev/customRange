{"version":3,"sources":["./src/app/shared/components/range/range.component.ts","./src/app/shared/components/range/range.component.html","./src/app/shared/shared.module.ts"],"names":[],"mappings":"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","file":"default~components-fixed-values-range-fixed-values-range-module~components-normal-range-normal-range-module-es2015.js","sourcesContent":["import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, map, takeWhile, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngc-range',\n  templateUrl: './range.component.html',\n  styleUrls: ['./range.component.scss']\n})\nexport class RangeComponent implements OnInit, OnDestroy {\n\n\n\n  @Input() min = 0;\n  @Input() max = 0;\n  @Input() type = '';\n\n  rangeSubscriptions: Subscription[] = [];\n  clickRange$: any;\n\n  firstRangePoint: HTMLSpanElement;\n  lastRangePoint: HTMLSpanElement;\n\n  // firstRangeValue: number;\n  // lastRangeValue: number;\n\n  isMouseDownEvent: boolean;\n  filterValue:number = 0;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    const body = document.body as HTMLElement;\n    this.rangeSubscriptions.push(this.setRangePointByClick());\n    // this.setValueRangePoint(firtsRange, 0);\n    // this.setValueRangePoint(lastRange, range.offsetWidth);\n  }\n\n  ngOnDestroy(): void {\n   this.rangeSubscriptions.forEach((s: Subscription) => s.unsubscribe());\n  }\n\n  setRangePointByClick(): Subscription {\n    console.log('setRangePointByClick');\n    const range = document.getElementById('range') as HTMLDivElement;\n    this.firstRangePoint = document.getElementById('first-range-point') as HTMLDivElement;\n    this.lastRangePoint = document.getElementById('last-range-point') as HTMLDivElement;\n\n    this.firtsPointValue = 0;\n    this.lastPointValue = range.offsetWidth;\n    return fromEvent(range, 'mousedown')\n      .pipe(\n        debounceTime(180),\n        distinctUntilChanged(),\n        map((event: MouseEvent) => {\n          let valueX = event.pageX;\n          console.log('valueX a', event.pageX);\n          valueX = valueX >= range.offsetWidth ? range.offsetWidth : valueX;\n          valueX = valueX < 0 ? 0 : valueX;\n          console.log('valueX', valueX);\n          return valueX;\n        })\n      ).subscribe(data => {\n          console.log('data', data);\n          const value = this.max * ((data / 2) / 100);\n          this.filterValue = value >= this.max ? this.max : value;\n          // rangePoint.style.left = data - Number(rangePoint.offsetWidth) + 'px';\n\n          this.checkRangePoints(data, this.firtsPointValue, this.lastPointValue);\n    });\n  }\n\n  checkRangePoints(newPosition, firtsPosition, lastPosition) {\n    console.log('newPosition, firtsPosition, lastPosition', newPosition, firtsPosition, lastPosition)\n    let restValueLeft = newPosition - firtsPosition;\n    restValueLeft = restValueLeft < 0 ? restValueLeft * -1 : restValueLeft;\n\n    let restValueRight = newPosition - lastPosition;\n    restValueRight = restValueRight < 0 ? restValueRight * -1 : restValueRight;\n\n    console.log('restValueLeft > restValueRight', restValueLeft , restValueRight);\n    if (restValueLeft <= restValueRight) {\n      this.firtsPointValue = newPosition;\n    } else{\n      this.lastPointValue = newPosition;\n    }\n  }\n\n  // setValueRangePoint(rangePoint: HTMLDivElement, value: number) {\n  //   rangePoint.style.left = value - Number(rangePoint.offsetWidth) + 'px';\n  // }\n\n  mouseDownEvent(evnt: any, id: string) {\n    console.log('mouseDownEvent');\n    // this.isMouseDownEvent = true;\n    // const body = document.body as HTMLElement;\n    // const range = document.getElementById('range') as HTMLDivElement;\n    // const firtsRange = document.getElementById(id) as HTMLDivElement;\n    // this.firstRangeSubscription = fromEvent(body, 'mousemove').pipe(\n    //   map((event: MouseEvent) => event.pageX),\n    //   ).subscribe(data => {\n    //     console.log('evnt', evnt);\n    //     if ((this.max * (((data - (range.offsetWidth - (range.offsetWidth * 1))) / 2) / 100) <= this.max) &&\n    //     (this.max * (((data - (range.offsetWidth )) / 2) / 100) >= (this.min - (range.offsetWidth * 1))) && this.isMouseDownEvent) {\n    //       firtsRange.style.left = (data - Number(range.offsetWidth)) + 'px';\n    //       console.log('VALUE ', data, this.max * ((data / 2) / 100), range.offsetWidth, firtsRange.style.left );\n    //     }\n    // });\n  }\n\n  mouseUpEvent(evnt: any, id: string) {\n    console.log('fin');\n    this.isMouseDownEvent = false;\n    // this.firstRangeSubscription.unsubscribe();\n  }\n\n\n  public get firtsPointValue(): number {\n    const position = this.firstRangePoint.style.left.replace('px', '');\n    console.log('firstRangePoint', position);\n    return Number(position);\n  }\n\n  public set firtsPointValue(v: number) {\n    this.firstRangePoint.style.left = String(v) + 'px';\n  }\n\n  public get lastPointValue(): number {\n    const position = this.lastRangePoint.style.left.replace('px', '');\n    console.log('firstRangePoint', position);\n    return Number(position);\n  }\n\n  public set lastPointValue(v: number) {\n    this.lastRangePoint.style.left = String(v) + 'px';\n  }\n\n\n  // mouseDownEvent(evnt: any, id: string) {\n  //   const body = document.body as HTMLElement;\n  //   const range = document.getElementById(id) as HTMLDivElement;\n  //   const firtsRange = document.getElementById(id) as HTMLDivElement;\n  //   this.firstRangeSubscription = fromEvent(body, 'mousemove').pipe(\n  //     map((event: MouseEvent) => event.pageX),\n  //   ).subscribe(data => {\n  //     if ((this.max * (((data - (range.offsetWidth - (range.offsetWidth * 1))) / 2) / 100) <= this.max) &&\n  //     (this.max * (((data - (range.offsetWidth )) / 2) / 100) >= (this.min - (range.offsetWidth * 1)))) {\n\n  //       firtsRange.style.left = (data - Number(range.offsetWidth)) + 'px';\n  //       console.log('VALUE ', data, this.max * ((data / 2) / 100), range.offsetWidth, firtsRange.style.left );\n  //     }\n  //   });\n  // }\n\n  // mouseUpEvent(evnt: any, id: string) {\n  //   console.log('fin');\n\n  //   this.firstRangeSubscription.unsubscribe();\n  // }\n\n}\n","<ng-container *ngIf=\"!type\">\n  <p>{{min}}</p>\n</ng-container>\n<div id=\"container-range\">\n  <p id=\"range\">\n    <span id=\"first-range-point\" class=\"first-range\"></span>\n    <!-- <span id=\"first-range-title\" class=\"first-range range-point-title\">{{firtsPointValue}}</span> -->\n    <span id=\"last-range-point\" class=\"last-range\"></span>\n    <!-- <span id=\"last-range-title\" class=\"last-range range-point-title\">{{lastPointValue}}</span> -->\n  </p>\n</div>\n<ng-container *ngIf=\"!type\">\n  <p>{{max}}</p>\n</ng-container>\n\n<br>\n<p>{{filterValue | currency:'EUR'}}</p>\n\n<p>{{clickRange$ |async}}</p>\n<br>\n{{firtsPointValue}}\n<br>\n{{lastPointValue}}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RangeComponent } from './components/range/range.component';\n\n\n\n@NgModule({\n  declarations: [\n    RangeComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    RangeComponent\n  ],\n})\nexport class SharedModule { }\n"],"sourceRoot":"webpack:///"}